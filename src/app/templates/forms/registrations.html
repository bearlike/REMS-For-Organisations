<!doctype html>
<html lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <link rel="icon" type="image/png" sizes="600x600" href="{{ url_for('static', filename='assets/img/Logo_White.png') }}" async>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/custom.css') }}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css" async>
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/fonts/fontawesome5-overrides.min.css') }}">
  <body id="page-top">
    <div id="wrapper">
      {% include 'partials/navigation.html' %}
      <div class="d-flex flex-column" id="content-wrapper">
        <div id="content">
          {% include 'partials/topbar.html' %}
          <div class="container-fluid">
            <div class="d-sm-flex justify-content-between align-items-center mb-4">
              <h3 class="text-dark mb-0">View Registrations</h3>
            </div>
            <form method="get" class="form-inline mb-3">
              <select name="event" class="form-control mr-2" onchange="this.form.submit()">
                <option value="">Select event</option>
                {% for t in events %}
                <option value="{{ t }}" {{ 'selected' if t == selected_event else '' }}>{{ t }}</option>
                {% endfor %}
              </select>
              <input type="hidden" name="perPage" value="{{ pagination.per_page }}">
            </form>
            {% if selected_event %}
            <table class="table table-sm table-striped">
              <thead>
                <tr>
                  {% for col in columns %}
                  <th>{{ col }}</th>
                  {% endfor %}
                </tr>
              </thead>
              <tbody>
                {% for row in rows %}
                <tr>
                  {% for col in columns %}
                  <td>{{ row[col] }}</td>
                  {% endfor %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
            <nav>
              <ul class="pagination">
                {% for p in range(1, (total // pagination.per_page) + 2) %}
                <li class="page-item {{ 'active' if p == pagination.page else '' }}">
                  <a class="page-link" href="{{ url_for('forms.view_registrations', event=selected_event, page=p, perPage=pagination.per_page) }}">{{ p }}</a>
                </li>
                {% endfor %}
              </ul>
            </nav>
            <a class="btn btn-secondary" href="{{ url_for('forms.download_csv', event=selected_event) }}">Download CSV</a>
            {% endif %}
          </div>
        </div>
        <footer class="bg-white sticky-footer">
          <div class="container my-auto">
            <div class="text-center">Made with ❤️ by <a href="https://thekrishna.in/">Krishnakanth</a> and <a href="https://www.linkedin.com/in/mahavisvanathan/">Mahalakshumi</a></div>
          </div>
        </footer>
      </div>
    <a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
    <script src="{{ url_for('static', filename='assets/js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/dark-mode.js') }}"></script>
          {% endfor %}
        </ul>
      </nav>
      <a class="btn btn-secondary" href="{{ url_for('forms.download_csv', event=selected_event) }}">Download CSV</a>
      {% endif %}
    </div>
  </body>
</html>
